<!DOCTYPE html>
<html>
<head>
  <title>Formulário de Cadastro</title>
  <!-- Incluindo o CSS do Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>

<div class="container">
  <h2>Formulário de Cadastro</h2>
  <form id="cadastroForm">
    <div class="form-group">
      <label for="nome">Nome:</label>
      <input type="text" class="form-control" id="nome" placeholder="Digite seu nome" required>
    </div>
    <div class="form-group">
      <label for="email">Email:</label>
      <input type="email" class="form-control" id="email" placeholder="Digite seu email" required>
    </div>
    <div class="form-group">
      <label for="senha">Senha:</label>
      <input type="password" class="form-control" id="senha" placeholder="Digite sua senha" required>
    </div>
    <div class="form-group">
      <label for="telefone">Telefone:</label>
      <input type="tel" class="form-control" id="telefone" placeholder="Digite seu telefone" required>
    </div>
    <div class="form-group">
      <label for="dataContratacao">Data de Contratação:</label>
      <input type="date" class="form-control" id="dataContratacao" required>
    </div>
    <div class="form-group">
      <label for="cargoId">ID do Cargo:</label>
      <input type="text" class="form-control" id="cargoId" placeholder="Digite o ID do cargo" required>
    </div>
    <div class="form-group">
      <label for="salario">Salário:</label>
      <input type="number" class="form-control" id="salario" placeholder="Digite o salário" required>
    </div>
    <div class="form-group">
      <label for="gerenteId">ID do Gerente:</label>
      <input type="text" class="form-control" id="gerenteId" placeholder="Digite o ID do gerente">
    </div>
    <div class="form-group">
      <label for="departamentoId">ID do Departamento:</label>
      <input type="text" class="form-control" id="departamentoId" placeholder="Digite o ID do departamento" required>
    </div>
    <button type="submit" class="btn btn-primary">Enviar</button>
  </form>
</div>


<script>
  document.addEventListener("DOMContentLoaded", function() {
    // Obtém o ID do funcionário a partir da URL
    var urlParams = new URLSearchParams(window.location.search);
    var funcionarioId = urlParams.get('id');

    // Faz a requisição FETCH para obter os dados do funcionário
    fetch('http://localhost:8083/funcionarios/id/' + funcionarioId)
      .then(response => response.json())
      .then(data => {
        // Preenche os campos do formulário com os dados retornados da API
        document.getElementById('nome').value = data.nome;
        document.getElementById('email').value = data.email;
        document.getElementById('senha').value = data.senha;
        document.getElementById('telefone').value = data.telefone;
        document.getElementById('dataContratacao').value = data.data_contratacao;
        document.getElementById('cargoId').value = data.cargoId;
        document.getElementById('salario').value = data.salario;
        document.getElementById('gerenteId').value = data.gerenteId;
        document.getElementById('departamentoId').value = data.departamentoId;
      })
      .catch(error => {
        // Caso ocorra algum erro na requisição
        console.log('Erro ao obter os dados do funcionário');
      });
  });
</script>

</body>
</html>
